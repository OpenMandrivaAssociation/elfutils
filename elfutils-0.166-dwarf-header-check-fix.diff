From: Takashi Iwai <tiwai@novell.com>
Subject: Fix for kernel debuginfo files
References: https://bugzilla.novell.com/show_bug.cgi?id=468247, comments 17-20
References: https://bugzilla.novell.com/show_bug.cgi?id=433182

Above BZ originally occured with Systemtap testsuite (stmt_rel.exp).

# stap -e 'probe kernel.statement("bio_put@fs/bio.c:*") {}'
semantic error: libdw failure (dwarf_getsrcfiles): invalid DWARF
...
---


 libdw/dwarf_getsrclines.c |    2 ++
 1 file changed, 2 insertions(+)

Index: elfutils-0.166/libdw/dwarf_getsrclines.c
===================================================================
--- elfutils-0.166.orig/libdw/dwarf_getsrclines.c	2016-03-02 17:25:38.000000000 +0100
+++ elfutils-0.166/libdw/dwarf_getsrclines.c	2016-06-27 14:23:58.787633776 +0200
@@ -404,8 +404,10 @@
   /* Consistency check.  */
   if (unlikely (linep != header_start + header_length))
     {
+#if 0
       __libdw_seterrno (DWARF_E_INVALID_DWARF);
       goto out;
+#endif
     }
 
   state.is_stmt = default_is_stmt;
